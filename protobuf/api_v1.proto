syntax = "proto3";

package dumbnotes.protobuf;

message LoginRequest {
    string username = 1;
    oneof secret {
        string password = 2;
        bytes refresh_token = 3;
    }
}

message LoginResponse {
    bytes refresh_token = 1;
    string token = 2; // jwt
}

message NoteListResponse {
    repeated NoteInfo notes_info = 1;
}

message NoteMetadata {
    bytes id = 1;
    int64 mtime = 2;
}

message NoteInfo {
    NoteMetadata metadata = 1;
    optional string name = 2;
}

message NoteResponse {
    NoteInfo info = 1;
    string contents = 2;
}

message NoteWriteRequest {
    int64 mtime = 1;
    optional string name = 2;
    string contents = 3;
}
